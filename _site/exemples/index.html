<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Koba, bridge between Knockout and Backbone</title>
  <link rel="stylesheet" href="http://localhost:4000//css/normalize.css">
  <link rel="stylesheet" href="http://localhost:4000//css/syntax.css">
  <link rel="stylesheet" href="http://localhost:4000//css/main.css">
<div class="navigation">
    <div class="navigation-inner">
        <ul>
            <li class="site-name"><a href="http://localhost:4000/">Koba</a></li>
            
            <li><a href="http://localhost:4000/documentation/" >Documentation</a></li>
            
            <li><a href="http://localhost:4000/exemples/" >Exemples</a></li>
            
            <li><a href="http://localhost:4000/license/" >License</a></li>
            
        </ul>
    </div>
</div>

</head>
<body>
  <div class="container">
    <h1><a href="http://github.com/mathieumast/koba">Koba</a></h1>
    
<h2 id="live-exemples">Live exemples</h2>

<h3 id="a-namedemo-modela-working-with-kobaview-and-backbone-model"><a name="demo-model"></a> Working with koba.View and Backbone model</h3>

<script type="text/html" id="tmpl-demo-model">
    <p>First name: <input data-bind='value: firstName, valueUpdate: "keyup"' /></p>
    <p>Last name: <input data-bind='value: lastName, valueUpdate: "keyup"' /></p>
    <p><strong data-bind='text: fullName'></strong></p>
</script>

<div id="content-demo-model" class="demo"></div>

<script type="text/javascript">
/*<![CDATA[*/
function demoModel() {
var Person = Backbone.Model.extend({
    defaults: {
        firstName: "",
        lastName: "",
        fullName: function() { 
            return this.get("firstName") + " " + this.get("lastName");
        }
    }
});
var person = new Person({
    firstName: "John",
    lastName: "Smith"
});
var MyView = koba.View.extend({
    el: "#content-demo-model",
    render: function() {
        this.$el.html("<div data-bind='template: {name: \"tmpl-demo-model\"}'></div>");
        return this;
    }
});
var myView = new MyView({data: person});
myView.render().bindData();
};
/*]]>*/
</script>

<blockquote>
  <p>HTML:</p>
</blockquote>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">'text/html'</span> <span class="na">id=</span><span class="s">'tmpl-demo-model'</span><span class="nt">&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">First</span> <span class="nx">name</span><span class="err">:</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'value: firstName, valueUpdate: "keyup"'</span> <span class="o">/&gt;&lt;</span><span class="sr">/</span><span class="err">p&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">Last</span> <span class="nx">name</span><span class="err">:</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'value: lastName, valueUpdate: "keyup"'</span> <span class="o">/&gt;&lt;</span><span class="sr">/</span><span class="err">p&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;&lt;</span><span class="nx">strong</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'text: fullName'</span><span class="o">&gt;&lt;</span><span class="sr">/</span><span class="err">strong&gt;&lt;/p&gt;</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'content-demo-model'</span> <span class="na">class=</span><span class="s">'demo'</span><span class="nt">&gt;&lt;/div&gt;</span></code></pre></div>

<blockquote>
  <p>Javascript:</p>
</blockquote>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">Person</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="na">defaults</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">firstName</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
        <span class="na">lastName</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
        <span class="na">fullName</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> 
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"firstName"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"lastName"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">({</span>
    <span class="na">firstName</span><span class="p">:</span> <span class="s2">"John"</span><span class="p">,</span>
    <span class="na">lastName</span><span class="p">:</span> <span class="s2">"Smith"</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">MyView</span> <span class="o">=</span> <span class="nx">koba</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="na">el</span><span class="p">:</span> <span class="s2">"#content-demo-model"</span><span class="p">,</span>
    <span class="na">render</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"&lt;div data-bind='template: {name: \"tmpl-demo-model\"}'&gt;&lt;/div&gt;"</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">myView</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyView</span><span class="p">({</span><span class="na">data</span><span class="p">:</span> <span class="nx">person</span><span class="p">});</span>
<span class="nx">myView</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">bindData</span><span class="p">();</span></code></pre></div>

<h3 id="a-namedemo-collectiona-working-with-kobaview-and-backbone-model--collection"><a name="demo-collection"></a> Working with koba.View and Backbone model &amp; collection</h3>

<script type="text/html" id="tmpl-demo-collection">
    <div data-bind="foreach: todos">
        <p><input data-bind='value: val, valueUpdate: "keyup"' /> <strong data-bind='text: val()'></strong></p>
    </div>
    <div>
        <form><input data-bind='value: todo.val' /> <button id='add' type='submit'>Add</button></form>
    </div>
</script>

<div id="content-demo-collection" class="demo"></div>

<script type="text/javascript">
/*<![CDATA[*/
function demoCollection() {
var Todo = Backbone.Model.extend({
    defaults: {val: ""}
});
var Todos = Backbone.Collection.extend({model: Todo});
var todos = new Todos([
    {val: "Try Koba"},
    {val: "Read Knockout documentation"}
]);
var todo = new Todo();
var data = {todo: todo, todos: todos};
var MyView = koba.View.extend({
    events: {"submit form": "add"},
    el: "#content-demo-collection",
    render: function() {
        this.$el.html("<div data-bind='template: {name: \"tmpl-demo-collection\"}'></div>");
        return this;
    },
    add: function(e) {
        e.preventDefault()
        todos.add(this.data.todo.toJSON());
        this.data.todo.clear();
    }
});
var myView = new MyView({data: data});
myView.render().bindData();
};
/*]]>*/
</script>

<blockquote>
  <p>HTML:</p>
</blockquote>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">'text/html'</span> <span class="na">id=</span><span class="s">'tmpl-demo-collection'</span><span class="nt">&gt;</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s2">"foreach: todos"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;&lt;</span><span class="nx">input</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'value: val, valueUpdate: "keyup"'</span> <span class="o">/&gt;</span> <span class="o">&lt;</span><span class="nx">strong</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'text: val()'</span><span class="o">&gt;&lt;</span><span class="sr">/</span><span class="err">strong&gt;&lt;/p&gt;</span>
    <span class="o">&lt;</span><span class="sr">/</span><span class="err">div&gt;</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">form</span><span class="o">&gt;&lt;</span><span class="nx">input</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'value: todo.val'</span> <span class="o">/&gt;</span> <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">id</span><span class="o">=</span><span class="s1">'add'</span> <span class="nx">type</span><span class="o">=</span><span class="s1">'submit'</span><span class="o">&gt;</span><span class="nx">Add</span><span class="o">&lt;</span><span class="sr">/</span><span class="err">button&gt;&lt;/form&gt;</span>
    <span class="o">&lt;</span><span class="sr">/</span><span class="err">div&gt;</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'content-demo-collection'</span> <span class="na">class=</span><span class="s">'demo'</span><span class="nt">&gt;&lt;/div&gt;</span></code></pre></div>

<blockquote>
  <p>Javascript:</p>
</blockquote>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">Todo</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="na">defaults</span><span class="p">:</span> <span class="p">{</span><span class="na">val</span><span class="p">:</span> <span class="s2">""</span><span class="p">}</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">Todos</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="na">model</span><span class="p">:</span> <span class="nx">Todo</span><span class="p">});</span>
<span class="kd">var</span> <span class="nx">todos</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Todos</span><span class="p">([</span>
    <span class="p">{</span><span class="na">val</span><span class="p">:</span> <span class="s2">"Try Koba"</span><span class="p">},</span>
    <span class="p">{</span><span class="na">val</span><span class="p">:</span> <span class="s2">"Read Knockout documentation"</span><span class="p">}</span>
<span class="p">]);</span>
<span class="kd">var</span> <span class="nx">todo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Todo</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span><span class="na">todo</span><span class="p">:</span> <span class="nx">todo</span><span class="p">,</span> <span class="na">todos</span><span class="p">:</span> <span class="nx">todos</span><span class="p">};</span>
<span class="kd">var</span> <span class="nx">MyView</span> <span class="o">=</span> <span class="nx">koba</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="na">events</span><span class="p">:</span> <span class="p">{</span><span class="s2">"submit form"</span><span class="p">:</span> <span class="s2">"add"</span><span class="p">},</span>
    <span class="na">el</span><span class="p">:</span> <span class="s2">"#content-demo-collection"</span><span class="p">,</span>
    <span class="na">render</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"&lt;div data-bind='template: {name: \"tmpl-demo-collection\"}'&gt;&lt;/div&gt;"</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="na">add</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
        <span class="nx">todos</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">todo</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">());</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">todo</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">myView</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyView</span><span class="p">({</span><span class="na">data</span><span class="p">:</span> <span class="nx">data</span><span class="p">});</span>
<span class="nx">myView</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">bindData</span><span class="p">();</span></code></pre></div>

<h3 id="a-namedemo-nesteda-working-with-kobaview-and-backbone-nested-model--collection"><a name="demo-nested"></a> Working with koba.View and Backbone nested model &amp; collection</h3>

<script type="text/html" id="tmpl-demo-nested">
    <p>First name: <input data-bind='value: firstName, valueUpdate: "keyup"' /></p>
    <p>Last name: <input data-bind='value: lastName, valueUpdate: "keyup"' /></p>
    <p><strong data-bind='text: fullName'></strong></p>
    <p style='padding-left: 1rem;'>Address:</p>
    <p style='padding-left: 3rem;'><input data-bind='value: address.number, valueUpdate: "keyup"' /> <input data-bind='value: address.street, valueUpdate: "keyup"' /></p>
    <p style='padding-left: 3rem;'><input data-bind='value: address.zipCode, valueUpdate: "keyup"' /> <input data-bind='value: address.city, valueUpdate: "keyup"' /></p>
    <p><strong data-bind='text: address.fullAddress'></strong></p>
    <p style='padding-left: 1rem;'>Phones:</p>
    <div data-bind="foreach: phones">
        <p style='padding-left: 3rem;'><input data-bind='value: number, valueUpdate: "keyup"' /> <strong data-bind='text: number()'></strong></p>
    </div>
</script>

<div id="content-demo-nested" class="demo"></div>

<script type="text/javascript">
/*<![CDATA[*/
function demoNested() {
var Address = Backbone.Model.extend({
    defaults: {
        number: "",
        street: "",
        zipCode: "",
        city: "",
        fullAddress: function() { 
            return this.get("number") + " " + this.get("street") + " " + this.get("zipCode") + " " + this.get("city");
        }
    }
});
var Phone = Backbone.Model.extend({
    defaults: {
        number: ""
    }
});
var Phones = Backbone.Collection.extend({model: Phone});
var Person = Backbone.Model.extend({
    defaults: {
        firstName: "",
        lastName: "",
        fullName: function() { 
            return this.get("firstName") + " " + this.get("lastName");
        },
        address: new Address(),
        phones: new Phones()
    }
});
var person = new Person({
    firstName: "John",
    lastName: "Smith",
    address: new Address({
        number: "41",
        street: "rue de la République",
        zipCode: "69002",
        city: "Lyon"
    }),
    phones: new Phones([
        {number: "12345678"},
        {number: "87654321"}
    ])
});
var MyView = koba.View.extend({
    el: "#content-demo-nested",
    render: function() {
        this.$el.html("<div data-bind='template: {name: \"tmpl-demo-nested\"}'></div>");
        return this;
    }
});
var myView = new MyView({data: person});
myView.render().bindData();
};
/*]]>*/
</script>

<blockquote>
  <p>HTML:</p>
</blockquote>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">'text/html'</span> <span class="na">id=</span><span class="s">'tmpl-demo-nested'</span><span class="nt">&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">First</span> <span class="nx">name</span><span class="err">:</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'value: firstName, valueUpdate: "keyup"'</span> <span class="o">/&gt;&lt;</span><span class="sr">/</span><span class="err">p&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">Last</span> <span class="nx">name</span><span class="err">:</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'value: lastName, valueUpdate: "keyup"'</span> <span class="o">/&gt;&lt;</span><span class="sr">/</span><span class="err">p&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;&lt;</span><span class="nx">strong</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'text: fullName'</span><span class="o">&gt;&lt;</span><span class="sr">/</span><span class="err">strong&gt;&lt;/p&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span> <span class="nx">style</span><span class="o">=</span><span class="s1">'padding-left: 1rem;'</span><span class="o">&gt;</span><span class="nx">Address</span><span class="err">:</span><span class="o">&lt;</span><span class="sr">/</span><span class="err">p&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span> <span class="nx">style</span><span class="o">=</span><span class="s1">'padding-left: 3rem;'</span><span class="o">&gt;&lt;</span><span class="nx">input</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'value: address.number, valueUpdate: "keyup"'</span> <span class="o">/&gt;</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'value: address.street, valueUpdate: "keyup"'</span> <span class="o">/&gt;&lt;</span><span class="sr">/</span><span class="err">p&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span> <span class="nx">style</span><span class="o">=</span><span class="s1">'padding-left: 3rem;'</span><span class="o">&gt;&lt;</span><span class="nx">input</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'value: address.zipCode, valueUpdate: "keyup"'</span> <span class="o">/&gt;</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'value: address.city, valueUpdate: "keyup"'</span> <span class="o">/&gt;&lt;</span><span class="sr">/</span><span class="err">p&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;&lt;</span><span class="nx">strong</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'text: address.fullAddress'</span><span class="o">&gt;&lt;</span><span class="sr">/</span><span class="err">strong&gt;&lt;/p&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span> <span class="nx">style</span><span class="o">=</span><span class="s1">'padding-left: 1rem;'</span><span class="o">&gt;</span><span class="nx">Phones</span><span class="err">:</span><span class="o">&lt;</span><span class="sr">/</span><span class="err">p&gt;</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s2">"foreach: phones"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">p</span> <span class="nx">style</span><span class="o">=</span><span class="s1">'padding-left: 3rem;'</span><span class="o">&gt;&lt;</span><span class="nx">input</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'value: number, valueUpdate: "keyup"'</span> <span class="o">/&gt;</span> <span class="o">&lt;</span><span class="nx">strong</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'text: number()'</span><span class="o">&gt;&lt;</span><span class="sr">/</span><span class="err">strong&gt;&lt;/p&gt;</span>
    <span class="o">&lt;</span><span class="sr">/</span><span class="err">div&gt;</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'content-demo-nested'</span> <span class="na">class=</span><span class="s">'demo'</span><span class="nt">&gt;&lt;/div&gt;</span></code></pre></div>

<blockquote>
  <p>Javascript:</p>
</blockquote>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">Address</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="na">defaults</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">number</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
        <span class="na">street</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
        <span class="na">zipCode</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
        <span class="na">city</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
        <span class="na">fullAddress</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> 
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"number"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"street"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"zipCode"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"city"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">Phone</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="na">defaults</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">number</span><span class="p">:</span> <span class="s2">""</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">Phones</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="na">model</span><span class="p">:</span> <span class="nx">Phone</span><span class="p">});</span>
<span class="kd">var</span> <span class="nx">Person</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="na">defaults</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">firstName</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
        <span class="na">lastName</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
        <span class="na">fullName</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> 
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"firstName"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"lastName"</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="na">address</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Address</span><span class="p">(),</span>
        <span class="na">phones</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Phones</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">({</span>
    <span class="na">firstName</span><span class="p">:</span> <span class="s2">"John"</span><span class="p">,</span>
    <span class="na">lastName</span><span class="p">:</span> <span class="s2">"Smith"</span><span class="p">,</span>
    <span class="na">address</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Address</span><span class="p">({</span>
        <span class="na">number</span><span class="p">:</span> <span class="s2">"41"</span><span class="p">,</span>
        <span class="na">street</span><span class="p">:</span> <span class="s2">"rue de la République"</span><span class="p">,</span>
        <span class="na">zipCode</span><span class="p">:</span> <span class="s2">"69002"</span><span class="p">,</span>
        <span class="na">city</span><span class="p">:</span> <span class="s2">"Lyon"</span>
    <span class="p">}),</span>
    <span class="na">phones</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Phones</span><span class="p">([</span>
        <span class="p">{</span><span class="na">number</span><span class="p">:</span> <span class="s2">"12345678"</span><span class="p">},</span>
        <span class="p">{</span><span class="na">number</span><span class="p">:</span> <span class="s2">"87654321"</span><span class="p">}</span>
    <span class="p">])</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">MyView</span> <span class="o">=</span> <span class="nx">koba</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="na">el</span><span class="p">:</span> <span class="s2">"#content-demo-nested"</span><span class="p">,</span>
    <span class="na">render</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"&lt;div data-bind='template: {name: \"tmpl-demo-nested\"}'&gt;&lt;/div&gt;"</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">myView</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyView</span><span class="p">({</span><span class="na">data</span><span class="p">:</span> <span class="nx">person</span><span class="p">});</span>
<span class="nx">myView</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">bindData</span><span class="p">();</span></code></pre></div>

<h3 id="a-namedemo-viewmodela-working-directly-with-kobaviewmodel-and-backboneview"><a name="demo-viewmodel"></a> Working directly with koba.ViewModel and Backbone.View</h3>

<script type="text/html" id="tmpl-demo-viewmodel">
    <p>First name: <input data-bind='value: firstName, valueUpdate: "keyup"' /></p>
    <p>Last name: <input data-bind='value: lastName, valueUpdate: "keyup"' /></p>
    <p><strong data-bind='text: fullName'></strong></p>
</script>

<div id="content-demo-viewmodel" class="demo"></div>

<script type="text/javascript">
/*<![CDATA[*/
function demoViewModel() {
var Person = Backbone.Model.extend({
    defaults: {
        firstName: "",
        lastName: "",
        fullName: function() { 
            return this.get("firstName") + " " + this.get("lastName");
        }
    }
});
var person = new Person({
    firstName: "John",
    lastName: "Smith"
});
var myViewModel = new koba.ViewModel(person);
var MyView = Backbone.View.extend({
    el: "#content-demo-viewmodel",
    initialize: function(params) {
        this.data = params.data;
    },
    render: function() {
        if (this.viewModel) {
            ko.cleanNode(this.$el[0]);
            this.viewModel.destroy();
        }  
        this.$el.html("<div data-bind='template: {name: \"tmpl-demo-viewmodel\"}'></div>");
        this.viewModel = new koba.ViewModel(this.data);
        ko.applyBindings(this.viewModel, this.$el[0]);
        return this;
    }
});
var myView = new MyView({data: person});
myView.render();
};
/*]]>*/
</script>

<blockquote>
  <p>HTML:</p>
</blockquote>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">'text/html'</span> <span class="na">id=</span><span class="s">'tmpl-demo-viewmodel'</span><span class="nt">&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">First</span> <span class="nx">name</span><span class="err">:</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'value: firstName, valueUpdate: "keyup"'</span> <span class="o">/&gt;&lt;</span><span class="sr">/</span><span class="err">p&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">Last</span> <span class="nx">name</span><span class="err">:</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'value: lastName, valueUpdate: "keyup"'</span> <span class="o">/&gt;&lt;</span><span class="sr">/</span><span class="err">p&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;&lt;</span><span class="nx">strong</span> <span class="nx">data</span><span class="o">-</span><span class="nx">bind</span><span class="o">=</span><span class="s1">'text: fullName'</span><span class="o">&gt;&lt;</span><span class="sr">/</span><span class="err">strong&gt;&lt;/p&gt;</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'content-demo-viewmodel'</span> <span class="na">class=</span><span class="s">'demo'</span><span class="nt">&gt;&lt;/div&gt;</span></code></pre></div>

<blockquote>
  <p>Javascript:</p>
</blockquote>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">Person</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="na">defaults</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">firstName</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
        <span class="na">lastName</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
        <span class="na">fullName</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> 
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"firstName"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"lastName"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">({</span>
    <span class="na">firstName</span><span class="p">:</span> <span class="s2">"John"</span><span class="p">,</span>
    <span class="na">lastName</span><span class="p">:</span> <span class="s2">"Smith"</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">myViewModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">koba</span><span class="p">.</span><span class="nx">ViewModel</span><span class="p">(</span><span class="nx">person</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">MyView</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="na">el</span><span class="p">:</span> <span class="s2">"#content-demo-viewmodel"</span><span class="p">,</span>
    <span class="na">initialize</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="na">render</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">viewModel</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">ko</span><span class="p">.</span><span class="nx">cleanNode</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">viewModel</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>  
        <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"&lt;div data-bind='template: {name: \"tmpl-demo-viewmodel\"}'&gt;&lt;/div&gt;"</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">viewModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">koba</span><span class="p">.</span><span class="nx">ViewModel</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
        <span class="nx">ko</span><span class="p">.</span><span class="nx">applyBindings</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">viewModel</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">myView</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyView</span><span class="p">({</span><span class="na">data</span><span class="p">:</span> <span class="nx">person</span><span class="p">});</span>
<span class="nx">myView</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span></code></pre></div>

<script type="text/javascript">
/*<![CDATA[*/
window.onload = function() {
    demoModel();
    demoCollection();
    demoNested();
    demoViewModel();
}
/*]]>*/
</script>


  </div>
<div class="github-fork-ribbon-wrapper right fixed" style="width: 150px;height: 150px;position: fixed;overflow: hidden;top: 0;z-index: 9999;pointer-events: none;right: 0;"><div class="github-fork-ribbon" style="position: absolute;padding: 2px 0;background-color: #333;background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));-webkit-box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);-moz-box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);z-index: 9999;pointer-events: auto;top: 42px;right: -43px;-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-o-transform: rotate(45deg);transform: rotate(45deg);"><a href="http://github.com/mathieumast/koba" style="font: 700 13px 'Helvetica Neue', Helvetica, Arial, sans-serif;color: #fff;text-decoration: none;text-shadow: 0 -1px rgba(0, 0, 0, 0.5);text-align: center;width: 200px;line-height: 20px;display: inline-block;padding: 2px 0;border-width: 1px 0;border-style: dotted;border-color: rgba(255, 255, 255, 0.7);">Fork me on GitHub</a></div></div>
<script src="//cdn.jsdelivr.net/jquery/2.1.1/jquery.js"></script>
<script src="//cdn.jsdelivr.net/underscorejs/1.6.0/underscore-min.js"></script>
<script src="//cdn.jsdelivr.net/backbonejs/1.1.2/backbone-min.js"></script>
<script src="//cdn.jsdelivr.net/knockout/3.1.0/knockout.js"></script>
<script src="http://localhost:4000//js/koba.js"></script>

</body>
</html>